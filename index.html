<!DOCTYPE html>
<html lang="ar">
<head>
  <meta charset="UTF-8">
  <title>حاسب زاوية ارتفاع الشمس</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 40px;
      background: #f9f9f9;
    }
    h2 { color: #333; }
    .container {
      background: white;
      padding: 20px;
      border-radius: 10px;
      max-width: 500px;
      box-shadow: 0 4px 8px rgba(0,0,0,0.1);
    }
    label { display: block; margin-top: 10px; }
    input {
      padding: 6px;
      width: 100%;
      margin-top: 4px;
    }
    button {
      margin-top: 15px;
      padding: 10px;
      background: #0077cc;
      color: white;
      border: none;
      border-radius: 6px;
      cursor: pointer;
    }
    button:hover { background: #005fa3; }
    pre {
      background: #eee;
      padding: 10px;
      border-radius: 6px;
      margin-top: 15px;
    }
  </style>
</head>
<body>
  <div class="container">
    <h2>حاسب زاوية ارتفاع الشمس</h2>

    <label>اليوم</label>
    <input type="number" id="day" placeholder="أدخل اليوم">

    <label>الشهر</label>
    <input type="number" id="month" placeholder="أدخل الشهر">

    <label>الساعة</label>
    <input type="number" id="hour" placeholder="أدخل الساعة">

    <label>الدقيقة</label>
    <input type="number" id="minute" placeholder="أدخل الدقيقة">

    <label>خط العرض (°)</label>
    <input type="number" id="latitude" placeholder="أدخل خط العرض">

    <label>خط الطول المحلي (°)</label>
    <input type="number" id="longLocal" placeholder="أدخل خط الطول المحلي">

    <label>خط الطول القياسي (°)</label>
    <input type="number" id="longStandard" placeholder="أدخل خط الطول القياسي">

    <label>التوقيت الصيفي (1=نعم، 0=لا)</label>
    <input type="number" id="dst" placeholder="1 أو 0">

    <label>معادلة الزمن (ET) بالدقائق</label>
    <input type="number" id="ET" placeholder="أدخل قيمة ET">

    <button onclick="calculate()">احسب</button>

    <pre id="results"></pre>
  </div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/suncalc/1.9.0/suncalc.min.js"></script>
<script>
function calculate() {
  const day = parseInt(document.getElementById("day").value);
  const month = parseInt(document.getElementById("month").value);
  let hour = parseInt(document.getElementById("hour").value);
  const minute = parseFloat(document.getElementById("minute").value);
  const latitude = parseFloat(document.getElementById("latitude").value);
  const longLocal = parseFloat(document.getElementById("longLocal").value);
  const longStandard = parseFloat(document.getElementById("longStandard").value);
  const dst = parseInt(document.getElementById("dst").value);
  const ET = parseFloat(document.getElementById("ET").value);

  if (dst === 1) hour -= 1;

  const localTime = hour + minute / 60.0;
  const solarTime = localTime + (4 * (longLocal - longStandard) + ET) / 60.0;
  const H = 15 * (solarTime - 12);

  const date = new Date(2025, month - 1, day, hour, minute);
  const sunPos = SunCalc.getPosition(date, latitude, longLocal);

  let output = "";
  output += "اليوم من السنة (N) = " + dayNumber(day, month) + "\n";
  output += "زاوية ارتفاع الشمس (β) = " + (sunPos.altitude * 180 / Math.PI).toFixed(4) + "°\n";
  output += "زاوية الارتفاع المحسوبة (β) = " + H.toFixed(4) + "°\n";

  document.getElementById("results").textContent = output;
}

function dayNumber(day, month) {
  const daysInMonth = [0,31,28,31,30,31,30,31,31,30,31,30,31];
  let total = 0;
  for (let i = 1; i < month; i++) total += daysInMonth[i];
  return total + day;
}
</script>
</body>
</html>
